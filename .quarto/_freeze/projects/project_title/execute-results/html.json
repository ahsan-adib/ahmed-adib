{
  "hash": "50213046a7e01499cc7b0389bb8d40fd",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Himalayan expedition data\"\nauthor: Ahmed A. Adib\ndate: 2025-07-22\ndraft: false\neditor-options:\n  chunk_output_type: inline\n---\n\n## Packages used\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidytuesdayR)\n```\n:::\n\n\n## Get the data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhimalayan.data = tidytuesdayR::tt_load(2025, week = 3)\n```\n:::\n\n\nAssign different data to different variables\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexped.data = himalayan.data$exped_tidy\npeak.data = himalayan.data$peaks_tidy\n```\n:::\n\n\nCheck the data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(exped.data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 69\n  EXPID PEAKID  YEAR SEASON SEASON_FACTOR  HOST HOST_FACTOR ROUTE1 ROUTE2 ROUTE3\n  <chr> <chr>  <dbl>  <dbl> <chr>         <dbl> <chr>       <chr>  <chr>  <lgl> \n1 EVER… EVER    2020      1 Spring            2 China       N Col… <NA>   NA    \n2 EVER… EVER    2020      1 Spring            2 China       N Col… <NA>   NA    \n3 EVER… EVER    2020      1 Spring            2 China       N Col… <NA>   NA    \n4 AMAD… AMAD    2020      3 Autumn            1 Nepal       SW Ri… <NA>   NA    \n5 AMAD… AMAD    2020      3 Autumn            1 Nepal       SW Ri… <NA>   NA    \n6 AMAD… AMAD    2020      3 Autumn            1 Nepal       SW Ri… <NA>   NA    \n# ℹ 59 more variables: ROUTE4 <lgl>, NATION <chr>, LEADERS <chr>,\n#   SPONSOR <chr>, SUCCESS1 <lgl>, SUCCESS2 <lgl>, SUCCESS3 <lgl>,\n#   SUCCESS4 <lgl>, ASCENT1 <chr>, ASCENT2 <chr>, ASCENT3 <lgl>, ASCENT4 <lgl>,\n#   CLAIMED <lgl>, DISPUTED <lgl>, COUNTRIES <chr>, APPROACH <chr>,\n#   BCDATE <date>, SMTDATE <date>, SMTTIME <chr>, SMTDAYS <dbl>, TOTDAYS <dbl>,\n#   TERMDATE <date>, TERMREASON <dbl>, TERMREASON_FACTOR <chr>, TERMNOTE <chr>,\n#   HIGHPOINT <dbl>, TRAVERSE <lgl>, SKI <lgl>, PARAPENTE <lgl>, CAMPS <dbl>, …\n```\n\n\n:::\n\n```{.r .cell-code}\ncolnames(exped.data)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"EXPID\"             \"PEAKID\"            \"YEAR\"             \n [4] \"SEASON\"            \"SEASON_FACTOR\"     \"HOST\"             \n [7] \"HOST_FACTOR\"       \"ROUTE1\"            \"ROUTE2\"           \n[10] \"ROUTE3\"            \"ROUTE4\"            \"NATION\"           \n[13] \"LEADERS\"           \"SPONSOR\"           \"SUCCESS1\"         \n[16] \"SUCCESS2\"          \"SUCCESS3\"          \"SUCCESS4\"         \n[19] \"ASCENT1\"           \"ASCENT2\"           \"ASCENT3\"          \n[22] \"ASCENT4\"           \"CLAIMED\"           \"DISPUTED\"         \n[25] \"COUNTRIES\"         \"APPROACH\"          \"BCDATE\"           \n[28] \"SMTDATE\"           \"SMTTIME\"           \"SMTDAYS\"          \n[31] \"TOTDAYS\"           \"TERMDATE\"          \"TERMREASON\"       \n[34] \"TERMREASON_FACTOR\" \"TERMNOTE\"          \"HIGHPOINT\"        \n[37] \"TRAVERSE\"          \"SKI\"               \"PARAPENTE\"        \n[40] \"CAMPS\"             \"ROPE\"              \"TOTMEMBERS\"       \n[43] \"SMTMEMBERS\"        \"MDEATHS\"           \"TOTHIRED\"         \n[46] \"SMTHIRED\"          \"HDEATHS\"           \"NOHIRED\"          \n[49] \"O2USED\"            \"O2NONE\"            \"O2CLIMB\"          \n[52] \"O2DESCENT\"         \"O2SLEEP\"           \"O2MEDICAL\"        \n[55] \"O2TAKEN\"           \"O2UNKWN\"           \"OTHERSMTS\"        \n[58] \"CAMPSITES\"         \"ROUTEMEMO\"         \"ACCIDENTS\"        \n[61] \"ACHIEVMENT\"        \"AGENCY\"            \"COMRTE\"           \n[64] \"STDRTE\"            \"PRIMRTE\"           \"PRIMMEM\"          \n[67] \"PRIMREF\"           \"PRIMID\"            \"CHKSUM\"           \n```\n\n\n:::\n:::\n\n\n## Disclaimer\n\nSince 8000 meter peaks are the most prestigious ones in terms of mountaineering, we will create a separate data file containing only the 8k peaks. First, get the names of the peaks from the `peak.data` file.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npeak_8k_names = peak.data |> filter(HEIGHTM >= 8000) |> pull(PEAKID)\n```\n:::\n\n\nJust to know the names of the peaks, we can extract the `PKNAME` instead of `PEAKID`\n\n\n::: {.cell}\n\n```{.r .cell-code}\npeak.data |> filter(HEIGHTM >= 8000) |> pull(PKNAME)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"Annapurna I\"           \"Annapurna I East\"      \"Annapurna I Middle\"   \n [4] \"Cho Oyu\"               \"Dhaulagiri I\"          \"Everest\"              \n [7] \"Kangchenjunga Central\" \"Kangchenjunga\"         \"Kangchenjunga South\"  \n[10] \"Lhotse\"                \"Lhotse Shar\"           \"Makalu\"               \n[13] \"Manaslu\"               \"Yalung Kang\"           \"Lhotse Middle\"        \n[16] \"Yalung Kang West\"     \n```\n\n\n:::\n:::\n\n\nWe can see there are 16 different names. If you are into mountaineering, you can see some famous names are missing, like `K2`, second highest peak in the world. These peaks are missing due to its presence in a different mountain range (Karakoram), instead of Himalayan range.\n\nNow we extract the expedition details of these 8k peaks.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexped.8k = exped.data |> filter(PEAKID %in% peak_8k_names)\n```\n:::\n\n\n## Questions\n\n### 1. What is the most successful route for the expedition for 8k peaks?\n\nThere are 4 different routes enlisted for each peaks, assigned by `ASCENT1`, `ASCENT2`, `ASCENT3` and `ASCENT4`. The succesful climbing in these routes are stored in corresponding logical vector `SUCCESS1`, `SUCCESS2`, `SUCCESS3`, `SUCCESS4`. We will use these SUCCESS data along with the `exped.8k` dataset.\n\n::: {.cell}\n\n```{.r .cell-code}\nexped.8k |> pivot_longer(cols = c(SUCCESS1, SUCCESS2, SUCCESS3, SUCCESS4),\n                           names_to = \"route_success\",\n                           values_to = \"success\") |>\n  group_by(route_success) |>\n  summarise(success_rate = (mean(success, na.rm = TRUE))*100) |>\n  ggplot(aes(x = route_success, y = success_rate, fill = route_success)) +\n  geom_col(width = 0.6, color = \"black\") +\n  labs(\n    title = \"Success rate by route\",\n    x = \"Route (1-4)\",\n    y = \"Success rate (%)\"\n  )\n```\n\n::: {.cell-output-display}\n![](project_title_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n### 2. Which countries has lead the most successful expedition?\n\nAgain, we will use the `SUCCESS` vector; now with the `NATION` vector; with the `exped.data` for the details of the all peaks.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexped.data |> filter(SUCCESS1 == TRUE | SUCCESS2 == TRUE | SUCCESS3 == TRUE | SUCCESS4 == TRUE) |>\n  count(NATION, sort = TRUE) |>\n  ggplot(aes(x = reorder(NATION, n), y = n)) +\n  geom_col(fill = \"steelblue\") +\n  geom_text(aes(label = n), hjust = -0.1, size = 3) +\n  labs(\n    title = \"Successful expedition by nation\",\n    x = \"Nation\",\n    y = \"Number of successful expedition\"\n    ) +\n  coord_flip()\n```\n\n::: {.cell-output-display}\n![](project_title_files/figure-html/unnamed-chunk-7-1.png){width=960}\n:::\n:::\n\n\n#### What about the 8k peaks\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexped.8k |> filter(SUCCESS1 == TRUE | SUCCESS2 == TRUE | SUCCESS3 == TRUE | SUCCESS4 == TRUE) |>\n  count(NATION, sort = TRUE) |>\n  ggplot(aes(x = reorder(NATION, n), y = n)) +\n  geom_col(fill = \"orangered4\") +\n  geom_text(aes(label = n), hjust = -0.1, size = 3) +\n  labs(\n    title = \"Successful expedition by nation on 8k peaks\",\n    x = \"Nation\",\n    y = \"Number of successful expedition\"\n  ) +\n  coord_flip()\n```\n\n::: {.cell-output-display}\n![](project_title_files/figure-html/unnamed-chunk-8-1.png){width=960}\n:::\n:::\n\n\n#### What about the one we actually care about (`Everest`)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexped.8k |> filter(SUCCESS1 == TRUE | SUCCESS2 == TRUE | SUCCESS3 == TRUE | SUCCESS4 == TRUE) |>\n  filter(PEAKID == \"EVER\") |>\n  count(NATION, sort = TRUE) |>\n  ggplot(aes(x = reorder(NATION, n), y = n)) +\n  geom_col(fill = \"lightsalmon3\") +\n  geom_text(aes(label = n), hjust = -0.1, size = 3) +\n  labs(\n    title = \"Successful expedition by nation on Everest\",\n    x = \"Nation\",\n    y = \"Number of successful expedition\"\n  ) +\n  coord_flip()\n```\n\n::: {.cell-output-display}\n![](project_title_files/figure-html/unnamed-chunk-9-1.png){width=960}\n:::\n:::\n\n\n### 3. How does the travel time vary in different seasons?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexped.data |> filter(!is.na(TOTDAYS), !is.na(SEASON_FACTOR)) |>\n  ggplot(aes(x = SEASON_FACTOR, y = TOTDAYS, fill = SEASON_FACTOR)) +\n  geom_jitter(aes(colour = SEASON_FACTOR)) +\n  scale_color_viridis_d(alpha = 1) +\n  labs(\n    title = \"Expedition duration by season\",\n    x = \"Season\",\n    y = \"Total days of expedition\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](project_title_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n### 4. Most common reasons for expedition termination\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexped.data |> count(TERMREASON_FACTOR, sort=TRUE) |>\n  ggplot(aes(x = reorder(TERMREASON_FACTOR,n), y = n, fill = n)) +\n  geom_col() + geom_text(aes(label = n, hjust = -0.5)) +\n  coord_flip() +\n  labs(\n    title = \"Common reasons for expedition termination\",\n    x = \"Number\",\n    y = \"Reasons\"\n  )\n```\n\n::: {.cell-output-display}\n![](project_title_files/figure-html/unnamed-chunk-11-1.png){width=1344}\n:::\n:::\n\n\n### 5. Which peak has the highest fatality rate?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexped.data |> left_join(select(peak.data, PEAKID, PKNAME), by = \"PEAKID\") |>\n  group_by(PKNAME) |>\n  summarise(\n    expeditions = n(),\n    total.deaths = sum(MDEATHS+HDEATHS),\n    fatality.rate = total.deaths / expeditions) |>\n  arrange(fatality.rate) |>\n  slice_max(fatality.rate, n = 10) |>\n  ggplot(aes(x = reorder(PKNAME, fatality.rate), y = fatality.rate)) +\n  geom_col(fill = \"maroon\") +\n  coord_flip() +\n  labs(\n    title = \"Fatality rate in himalayan peaks\",\n    x = \"Peak name\",\n    y = \"Fatality rate\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](project_title_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n#### Among the 8k peaks\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexped.8k |> left_join(select(peak.data, PEAKID, PKNAME), by = \"PEAKID\") |>\n  group_by(PKNAME) |>\n  summarise(\n    expeditions = n(),\n    total.deaths = sum(MDEATHS+HDEATHS),\n    fatality.rate = total.deaths / expeditions) |>\n  arrange(fatality.rate) |>\n  #slice_max(fatality.rate, n = 10) |>\n  ggplot(aes(x = reorder(PKNAME, fatality.rate), y = fatality.rate)) +\n  geom_col(fill = \"firebrick3\") +\n  coord_flip() +\n  labs(\n    title = \"Fatality rate in 8k peaks\",\n    x = \"Peak name\",\n    y = \"Fatality rate\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](project_title_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n#### In case of number of fatalities on the peaks\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexped.data |> left_join(select(peak.data, PEAKID, PKNAME), by = \"PEAKID\") |>\n  group_by(PKNAME) |>\n  summarise(total.deaths = sum(MDEATHS+HDEATHS)) |>\n  arrange(total.deaths) |>\n  slice_max(total.deaths, n = 10) |>\n  ggplot(aes(x = reorder(PKNAME, total.deaths), y = total.deaths)) +\n  geom_col(fill = \"red4\") +\n  coord_flip() +\n  labs(\n    title = \"Number of deaths in himalayan peaks\",\n    x = \"Peak name\",\n    y = \"No. of death\"\n  ) +\n  geom_text(aes(label = total.deaths), hjust = -.3) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](project_title_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n### 6. Does the use of supplemental oxygen affect the success rate?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexped.data |> mutate(success = SUCCESS1 | SUCCESS2 | SUCCESS3 | SUCCESS4) |>\n  group_by(O2USED) |>\n  summarise(success.rate = (mean(success, na.rm = TRUE))) |>\n  ggplot(aes(x = O2USED, y = success.rate, fill = O2USED)) +\n  geom_col(width = 0.3) +\n  geom_text(aes(label = scales::percent(success.rate, accuracy = 0.1), vjust = -0.5,  size = 4)\n) +\n  theme(legend.position = \"none\") +\n  labs(\n    title = \"Success rate with supplemental oxygen\",\n    x = \"Oxygen used\",\n    y = \"Success rate\")\n```\n\n::: {.cell-output-display}\n![](project_title_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n### 7. Are commercial or standard routes more frequently involved in accidents?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexped.data |>\n  mutate(accident = !is.na(ACCIDENTS)) |>\n  group_by(COMRTE, STDRTE) |>\n  summarise(\n    accident_rate = scales::percent(mean(accident, na.rm = TRUE)),\n    total = n()\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`summarise()` has grouped output by 'COMRTE'. You can override using the\n`.groups` argument.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 × 4\n# Groups:   COMRTE [2]\n  COMRTE STDRTE accident_rate total\n  <lgl>  <lgl>  <chr>         <int>\n1 FALSE  FALSE  2%              268\n2 FALSE  TRUE   1%              177\n3 TRUE   FALSE  0%              146\n4 TRUE   TRUE   2%              291\n```\n\n\n:::\n:::\n\n",
    "supporting": [
      "project_title_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}